import{useStores as e,defineInterface as t,defineDisplay as n}from"@directus/extensions-sdk";import{computed as a,defineComponent as i,resolveComponent as o,resolveDirective as l,openBlock as r,createElementBlock as c,withDirectives as p,createBlock as d,createSlots as s,withCtx as u,createVNode as f,unref as v,normalizeClass as y,withModifiers as h,createCommentVNode as m,createElementVNode as g,resolveDynamicComponent as b,toDisplayString as k}from"vue";import{useI18n as w}from"vue-i18n";function _(){const{t:e}=w();return{isCopySupported:a((()=>{var e;return!!(null==(e=null==navigator?void 0:navigator.clipboard)?void 0:e.writeText)})),isPasteSupported:a((()=>{var e;return!!(null==(e=null==navigator?void 0:navigator.clipboard)?void 0:e.readText)})),copyToClipboard:async function(t,n,a){var i,o,l;try{return await(null==(i=null==navigator?void 0:navigator.clipboard)?void 0:i.writeText(t)),n.add({title:null!=(o=null==a?void 0:a.success)?o:e("copy_raw_value_success")}),!0}catch(t){return n.add({type:"error",title:null!=(l=null==a?void 0:a.fail)?l:e("copy_raw_value_fail")}),!1}},pasteFromClipboard:async function(t,n){var a,i,o;try{const o=await(null==(a=null==navigator?void 0:navigator.clipboard)?void 0:a.readText());return t.add({title:null!=(i=null==n?void 0:n.success)?i:e("paste_raw_value_success")}),o}catch(a){return t.add({type:"error",title:null!=(o=null==n?void 0:n.fail)?o:e("paste_raw_value_fail")}),null}}}}function x(t){return a((()=>{var n;if("$project_url"===t){return(null==(n=e().useSettingsStore().settings)?void 0:n.project_url)||""}return t||""}))}function L(e){return{computedLink:a((()=>x(e.linkPrefix).value+e.value)),computedCopyValue:a((()=>x(e.copyPrefix).value+e.value))}}const S={class:"action-interface"},C=["href","target"];var A=i({__name:"interface",props:{value:{type:[String,Number],default:null},clickAction:{type:String,default:"default"},showCopy:{type:Boolean,default:!1},copyPosition:{type:String,default:"end"},copyPrefix:{type:String,default:""},showLink:{type:Boolean,default:!1},linkPosition:{type:String,default:"end"},linkPrefix:{type:String,default:""},placeholder:{type:String,default:null},iconLeft:{type:String,default:null},iconRight:{type:String,default:null},min:{type:Number,default:void 0},max:{type:Number,default:void 0},step:{type:Number,default:1},type:{type:String,default:null},disabled:{type:Boolean,default:!1},openLinkAsNewTab:{type:Boolean,default:!0}},emits:["input"],setup(t,{emit:n}){const i=t,{isCopySupported:b,copyToClipboard:k}=_(),{useNotificationsStore:w}=e(),x=w(),{computedLink:A,computedCopyValue:P}=L(i),T=a((()=>["bigInteger","integer","float","decimal"].includes(i.type)?"number":"text"));async function B(){await k(`${P.value}`,x)}function N(e){"copy"===i.clickAction&&i.disabled&&i.value&&(e.stopPropagation(),B()),"link"===i.clickAction&&i.disabled&&i.value&&(e.stopPropagation(),window.open(A.value,"_blank","noopener, noreferrer"))}const $=a((()=>"copy"===i.clickAction&&b?"Copy value":"link"===i.clickAction?"Open link":void 0));return(e,n)=>{const a=o("v-icon"),i=o("v-input"),k=o("v-button"),w=l("tooltip");return r(),c("div",S,[p((r(),d(i,{"model-value":t.value,disabled:t.disabled,type:T.value,placeholder:t.placeholder,min:t.min,max:t.max,step:t.step,"onUpdate:modelValue":n[0]||(n[0]=t=>e.$emit("input",t)),onClick:N},s({_:2},[t.iconLeft?{name:"prepend",fn:u((()=>[f(a,{name:t.iconLeft},null,8,["name"])])),key:"0"}:void 0,t.iconRight?{name:"append",fn:u((()=>[f(a,{name:t.iconRight},null,8,["name"])])),key:"1"}:void 0]),1032,["model-value","disabled","type","placeholder","min","max","step"])),[[w,$.value]]),t.showCopy&&v(b)?p((r(),d(k,{key:0,disabled:!t.value,icon:"",secondary:"",xLarge:"",class:y("start"===t.copyPosition?"-order-1":"order-1")},{default:u((()=>[f(a,{name:"content_copy",onClick:h(B,["stop"])},null,8,["onClick"])])),_:1},8,["disabled","class"])),[[w,t.value?`Copy: ${v(P)}`:"Can't copy empty value"]]):m("v-if",!0),m(' TODO: button supports :to=routerLink and :href=custom link. Switch from custom a-tag to those. Use condition: href for full url and "to" for internal links (incomplete url)  '),t.showLink?p((r(),d(k,{key:1,disabled:!t.value,icon:"",secondary:"",xLarge:"",class:y("start"===t.linkPosition?"-order-1":"order-1")},{default:u((()=>[g("a",{href:v(A),target:t.openLinkAsNewTab?"_blank":"_self",rel:"noopener noreferrer",onClick:n[1]||(n[1]=h((()=>{}),["stop"]))},[f(a,{name:"open_in_new"})],8,C)])),_:1},8,["disabled","class"])),[[w,t.value?`Follow link: ${v(A)}`:"Can't follow empty link"]]):m("v-if",!0)])}}}),P=[],T=[];function B(e,t){if(e&&"undefined"!=typeof document){var n,a=!0===t.prepend?"prepend":"append",i=!0===t.singleTag,o="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var l=P.indexOf(o);-1===l&&(l=P.push(o)-1,T[l]={}),n=T[l]&&T[l][a]?T[l][a]:T[l][a]=r()}else n=r();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function r(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),i=0;i<n.length;i++)e.setAttribute(n[i],t.attributes[n[i]]);var l="prepend"===a?"afterbegin":"beforeend";return o.insertAdjacentElement(l,e),e}}B(".action-interface[data-v-a1062b3f] {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n.action-interface[data-v-a1062b3f] > div[data-v-a1062b3f] {\n  display: inherit;\n}\n.action-interface[data-v-a1062b3f] > div[data-v-a1062b3f].order-1[data-v-a1062b3f] {\n  order: 1;\n  margin-left: 8px;\n}\n.action-interface[data-v-a1062b3f] > div[data-v-a1062b3f].-order-1[data-v-a1062b3f] {\n  order: -1;\n  margin-right: 8px;\n}",{});var N=(e,t)=>{const n=e.__vccOpts||e;for(const[e,a]of t)n[e]=a;return n};function $(e){const t=[{text:"Copy to clipboard",value:"copy"},{text:"Default click action",value:"default"}];return e&&t.push({text:"Open link",value:"link"}),t}var O=t({id:"field-actions",name:"Action interface",icon:"ads_click",description:"Display content with actions like linking or copy to clipboard. (By clicking on the content (only at readonly) and seperate buttons)! NOTE: the content needs to match the schema",component:N(A,[["__scopeId","data-v-a1062b3f"],["__file","interface.vue"]]),types:["uuid","string","text","bigInteger","integer","decimal","float"],options:({field:e})=>{var t,n,a;const i=["string","text"].includes(null!=(t=e.type)?t:"unknown"),o=["bigInteger","integer","float","decimal"].includes(null!=(n=e.type)?n:"unknown"),l=[{field:"groupCopySettings",name:"Copy item settings",type:"alias",meta:{field:"groupCopySettings",interface:"group-detail",special:["alias","no-data","group"],options:{start:"closed",headerIcon:"content_copy"}}},{field:"groupLinkSettings",name:"Link item settings",type:"alias",meta:{field:"groupLinkSettings",interface:"group-detail",special:["alias","no-data","group"],options:{start:"closed",headerIcon:"open_in_new"}}},{field:"showCopy",name:"Display copy icon",type:"boolean",meta:{width:"full",interface:"boolean",options:{label:"Display a copy button next to the item"},group:"groupCopySettings"},schema:{default_value:!1}},{field:"copyPosition",name:"Copy icon position",type:"string",meta:{width:"half",interface:"select-radio",options:{choices:[{text:"Start",value:"start"},{text:"End",value:"end"}]},group:"groupCopySettings"},schema:{default_value:"end"}},{field:"copyPrefix",name:"Copy value prefix",type:"string",meta:{width:"half",interface:"select-dropdown",options:{placeholder:"Enter prefix or select variable",choices:[{text:"$project_url",value:"$project_url"},{text:"https://",value:"https://"}],allowOther:!0,allowNone:!0},note:"Copies the field value with the given prefix",group:"groupCopySettings"},schema:{default_value:""}},{field:"showLink",name:"Display link icon",type:"boolean",meta:{width:"full",interface:"boolean",options:{label:"Display a link button next to the item"},group:"groupLinkSettings"},schema:{default_value:!1}},{field:"linkPosition",name:"Link icon position",type:"string",meta:{width:"half",interface:"select-radio",options:{choices:[{text:"Start",value:"start"},{text:"End",value:"end"}]},group:"groupLinkSettings"},schema:{default_value:"end"}},{field:"linkPrefix",name:"Link value prefix",type:"string",meta:{width:"half",interface:"select-dropdown",options:{placeholder:"Enter prefix or select variable",choices:[{text:"$project_url",value:"$project_url"},{text:"Mail-Link (mailto:)",value:"mailto:"},{text:"Phole-Link (tel:)",value:"tel:"},{text:"https://",value:"https://"}],allowOther:!0,allowNone:!0},note:"Links to the field value with the given prefix",group:"groupLinkSettings"},schema:{default_value:""}},{field:"openLinkAsNewTab",name:"Open Link",type:"boolean",meta:{width:"full",interface:"select-radio",options:{choices:[{text:"As New Tab",value:!0},{text:"On Current Tab",value:!1}]},group:"groupLinkSettings"},schema:{default_value:!0}}],r=[{field:"clickAction",name:"Click Action (when clicking on the value)",type:"string",meta:{width:"full",interface:"select-dropdown",options:{choices:$(i)}},schema:{default_value:"default"}}];return[{field:"placeholder",name:"$t:placeholder",meta:{width:"half",interface:"system-input-translated-string",options:{placeholder:"$t:enter_a_placeholder"}}},{field:"iconLeft",name:"$t:icon_left",type:"string",meta:{width:"half",interface:"select-icon"}},{field:"iconRight",name:"$t:icon_right",type:"string",meta:{width:"half",interface:"select-icon"}},...o?[{field:"min",name:"$t:interfaces.input.minimum_value",type:"integer",meta:{width:"half",interface:"input"}},{field:"max",name:"$t:interfaces.input.maximum_value",type:"integer",meta:{width:"half",interface:"input"}},{field:"step",name:"$t:interfaces.input.step_interval",type:"integer",meta:{width:"half",interface:"input"},schema:{default_value:1}}]:[],...(null==(a=e.meta)?void 0:a.readonly)?r:[],...l]}});const j={key:1,class:"action-display"},E={key:0,class:"ml-2"},D={key:0,class:"ml-2"};var I=i({__name:"display",props:{value:{type:String,default:null},type:{type:String,required:!0},interfaceOptions:{type:Object,default:{}},hideFieldValue:{type:Boolean,default:!1},clickAction:{type:String,default:"default"},showCopy:{type:Boolean,default:!1},copyPosition:{type:String,default:"end"},copyPrefix:{type:String,default:""},copyButtonLabel:{type:String,default:""},showLink:{type:Boolean,default:!1},linkPosition:{type:String,default:"end"},linkPrefix:{type:String,default:""},linkButtonLabel:{type:String,default:""},openLinkAsNewTab:{type:Boolean,default:!0}},setup(t){const n=t,{isCopySupported:i,copyToClipboard:s}=_(),{useNotificationsStore:w}=e(),x=w(),{computedLink:S,computedCopyValue:C}=L(n);async function A(){await s(C.value,x)}function P(e){"copy"===n.clickAction&&(e.stopPropagation(),A()),"link"===n.clickAction&&e.stopPropagation()}const T=a((()=>"default"!==n.clickAction&&(!("copy"!==n.clickAction||!i)||"link"===n.clickAction))),B=a((()=>"copy"===n.clickAction&&i?"Copy value":"link"===n.clickAction?"Open link":void 0));return(e,n)=>{const a=o("value-null"),s=o("v-icon"),w=l("tooltip");return t.value?(r(),c("span",j,[t.hideFieldValue?m("v-if",!0):p((r(),d(b("link"===t.clickAction?"a":"span"),{key:0,class:"dynamic-wrapper",href:v(S),target:t.openLinkAsNewTab?"_blank":"_self",rel:"noopener noreferrer"},{default:u((()=>[g("span",{class:y(T.value?"action-background":""),onClick:P},k(t.value),3)])),_:1},8,["href","target"])),[[w,B.value,void 0,{left:!0}]]),t.showCopy&&v(i)?p((r(),d(b(t.copyButtonLabel?"v-button":"span"),{key:1,outlined:"",small:"",class:y("start"===t.copyPosition?"-order-1":"order-1"),onClick:h(A,["stop"])},{default:u((()=>[f(s,{name:"content_copy",color:t.copyButtonLabel?"primary":""},null,8,["color"]),t.copyButtonLabel?(r(),c("span",E,k(t.copyButtonLabel),1)):m("v-if",!0)])),_:1},8,["class","onClick"])),[[w,`Copy: ${v(C)}`]]):m("v-if",!0),t.showLink?p((r(),d(b(t.linkButtonLabel?"v-button":"a"),{key:2,outlined:"",small:"",href:v(S),target:t.openLinkAsNewTab?"_blank":"_self",rel:"noopener noreferrer",onClick:n[0]||(n[0]=h((()=>{}),["stop"])),class:y("start"===t.linkPosition?"-order-1":"order-1")},{default:u((()=>[f(s,{name:"open_in_new",color:t.linkButtonLabel?"primary":""},null,8,["color"]),t.linkButtonLabel?(r(),c("span",D,k(t.linkButtonLabel),1)):m("v-if",!0)])),_:1},8,["href","target","class"])),[[w,`Follow link: ${v(S)}`]]):m("v-if",!0)])):(r(),d(a,{key:0}))}}});B(".header-bar .title-container .action-display .action-background {\n  line-height: 2rem;\n  padding-top: 0;\n  padding-bottom: 0;\n}\n\n.render-template:has(.action-display) {\n  display: flex;\n  align-items: center;\n}",{});B(".action-display[data-v-348939b4] {\n  display: inline-flex;\n  flex-direction: row;\n  align-items: center;\n}\n.action-display[data-v-348939b4] span[data-v-348939b4],\n.action-display[data-v-348939b4] a[data-v-348939b4],\n.action-display[data-v-348939b4] .v-button[data-v-348939b4] {\n  display: inherit;\n}\n.action-display[data-v-348939b4] span[data-v-348939b4].order-1[data-v-348939b4],\n.action-display[data-v-348939b4] a[data-v-348939b4].order-1[data-v-348939b4],\n.action-display[data-v-348939b4] .v-button[data-v-348939b4].order-1[data-v-348939b4] {\n  order: 1;\n  margin-left: 8px;\n}\n.action-display[data-v-348939b4] span[data-v-348939b4].-order-1[data-v-348939b4],\n.action-display[data-v-348939b4] a[data-v-348939b4].-order-1[data-v-348939b4],\n.action-display[data-v-348939b4] .v-button[data-v-348939b4].-order-1[data-v-348939b4] {\n  order: -1;\n  margin-right: 8px;\n}\n.action-display[data-v-348939b4] .ml-2[data-v-348939b4] {\n  margin-left: 0.5rem;\n}\n.action-display[data-v-348939b4] [data-v-348939b4] .v-icon {\n  --v-icon-size: 18px;\n  --v-icon-color: var(--border-normal-alt);\n}\n.action-display[data-v-348939b4] [data-v-348939b4] .v-icon[data-v-348939b4]:hover {\n  --v-icon-color: var(--primary);\n}\n.action-display[data-v-348939b4] .action-background[data-v-348939b4] {\n  background-color: var(--primary-10);\n  color: var(--primary);\n  padding: 0.5rem 1rem;\n  border-radius: 5rem; /* arbitrary value for a nice smooth rounding */\n}\n.action-display[data-v-348939b4] .action-background[data-v-348939b4][data-v-348939b4]:hover {\n  background-color: var(--primary-25);\n}",{});const V=[O],F=[n({id:"field-actions",name:"Action display",icon:"ads_click",description:"Display content with actions like linking or copy to clipboard. (By clicking on the content (only at readonly) and seperate buttons)! NOTE: the content needs to match the schema",component:N(I,[["__scopeId","data-v-348939b4"],["__file","display.vue"]]),types:["uuid","string","text","bigInteger","integer","decimal","float"],options:({field:e})=>{var t;const n=[{field:"groupCopySettings",name:"Copy item settings",type:"alias",meta:{field:"groupCopySettings",interface:"group-detail",special:["alias","no-data","group"],options:{start:"closed",headerIcon:"content_copy"}}},{field:"groupLinkSettings",name:"Link item settings",type:"alias",meta:{field:"groupLinkSettings",interface:"group-detail",special:["alias","no-data","group"],options:{start:"closed",headerIcon:"open_in_new"}}},{field:"showCopy",name:"Display copy icon",type:"boolean",meta:{width:"full",interface:"boolean",options:{label:"Display a copy button next to the item"},group:"groupCopySettings"},schema:{default_value:!1}},{field:"copyPosition",name:"Copy icon position",type:"string",meta:{width:"half",interface:"select-radio",options:{choices:[{text:"Start",value:"start"},{text:"End",value:"end"}]},group:"groupCopySettings"},schema:{default_value:"end"}},{field:"copyPrefix",name:"Copy value prefix",type:"string",meta:{width:"half",interface:"select-dropdown",options:{placeholder:"Enter prefix or select variable",choices:[{text:"$project_url",value:"$project_url"},{text:"https://",value:"https://"}],allowOther:!0,allowNone:!0},note:"Copies the field value with the given prefix",group:"groupCopySettings"},schema:{default_value:""}},{field:"showLink",name:"Display link icon",type:"boolean",meta:{width:"full",interface:"boolean",options:{label:"Display a link button next to the item"},group:"groupLinkSettings"},schema:{default_value:!1}},{field:"linkPosition",name:"Link icon position",type:"string",meta:{width:"half",interface:"select-radio",options:{choices:[{text:"Start",value:"start"},{text:"End",value:"end"}]},group:"groupLinkSettings"},schema:{default_value:"end"}},{field:"linkPrefix",name:"Link value prefix",type:"string",meta:{width:"half",interface:"select-dropdown",options:{placeholder:"Enter prefix or select variable",choices:[{text:"$project_url",value:"$project_url"},{text:"Mail-Link (mailto:)",value:"mailto:"},{text:"Phole-Link (tel:)",value:"tel:"},{text:"https://",value:"https://"}],allowOther:!0,allowNone:!0},note:"Links to the field value with the given prefix",group:"groupLinkSettings"},schema:{default_value:""}},{field:"openLinkAsNewTab",name:"Open Link",type:"boolean",meta:{width:"full",interface:"select-radio",options:{choices:[{text:"As New Tab",value:!0},{text:"On Current Tab",value:!1}]},group:"groupLinkSettings"},schema:{default_value:!0}}];return[...[{field:"hideFieldValue",name:"Hide field value",type:"boolean",meta:{width:"full",interface:"v-checkbox",note:"When enabled the field value will be hidden. Can be used to only show the actions"},schema:{default_value:!1}},{field:"clickAction",name:"Click Action (when clicking on the value)",type:"string",meta:{width:"full",interface:"select-dropdown",options:{choices:$(["string","text"].includes(null!=(t=e.type)?t:"unknown"))}},schema:{default_value:"default"}}],...n,{field:"copyButtonLabel",name:"Copy button label",type:"string",meta:{width:"half",interface:"system-input-translated-string",group:"groupCopySettings",note:"When used the copy icon will be shown as button with the given label"},schema:{default_value:""}},{field:"linkButtonLabel",name:"Link button label",type:"string",meta:{width:"half",interface:"system-input-translated-string",group:"groupLinkSettings",note:"When used the link icon will be shown as button with the given label"},schema:{default_value:""}}]}})],R=[],W=[],q=[],M=[];export{F as displays,V as interfaces,R as layouts,W as modules,M as operations,q as panels};
